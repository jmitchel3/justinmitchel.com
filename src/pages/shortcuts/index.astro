---
import { getCollection } from 'astro:content';
import BaseLayout from '@/layouts/BaseLayout.astro';

// Get all shortcuts (posts tagged with "Shortcuts" or "Shortcut")
const shortcuts = (await getCollection('posts', ({ data }) => {
  if (data.draft) return false;
  const tags = data.tags || [];
  return tags.some(tag => tag === 'Shortcuts' || tag === 'Shortcut');
}))
  .sort((a, b) => {
    // Sort by order field if present, then by date
    const orderA = a.data.order ?? Infinity;
    const orderB = b.data.order ?? Infinity;
    if (orderA !== orderB) return orderA - orderB;
    return b.data.date.valueOf() - a.data.date.valueOf();
  });
---

<BaseLayout title="Shortcuts - Justin Mitchel">
  <div class="page-container">
    <header class="page-header">
      <h1 class="page-title">Shortcuts</h1>
      <p class="page-description">Tips I've found useful.</p>
    </header>

    <section class="shortcuts-section">
      <ul class="shortcut-list">
        {shortcuts.map((shortcut) => (
          <li>
            <a href={`/posts/${shortcut.slug}/`} class="shortcut-link">
              {shortcut.data.title}
            </a>
            {shortcut.data.description && (
              <p class="shortcut-description">{shortcut.data.description}</p>
            )}
          </li>
        ))}
      </ul>
    </section>
  </div>
</BaseLayout>

<style>
  .page-container {
    max-width: 42rem;
    margin: 0 auto;
    padding: 0 1.5rem;
  }

  .page-header {
    padding: 4rem 0 3rem;
    border-bottom: 1px solid var(--color-border);
  }

  .page-title {
    font-size: clamp(2rem, 6vw, 3rem);
    margin: 0 0 0.75rem 0;
    letter-spacing: -0.03em;
  }

  .page-description {
    font-size: 1.125rem;
    color: var(--color-text-secondary);
    margin: 0;
  }

  .shortcuts-section {
    padding: 3rem 0;
  }

  .shortcut-list {
    list-style: none;
    padding: 0;
    margin: 0;
  }

  .shortcut-list li {
    margin-bottom: 2rem;
  }

  .shortcut-link {
    font-size: 1.25rem;
    font-weight: 600;
    color: var(--color-text);
    text-decoration: none;
    text-underline-offset: 0.2em;
    transition: color 0.15s;
    display: block;
    margin-bottom: 0.5rem;
  }

  .shortcut-link:hover {
    color: var(--color-accent);
    text-decoration: underline;
    text-decoration-color: var(--color-accent);
  }

  .shortcut-description {
    font-size: 1rem;
    color: var(--color-text-secondary);
    margin: 0;
    line-height: 1.6;
  }
</style>
